<!-- SEARCH -->
<div class="container">
  <div class="row">
    <!-- search by id -->
    <div class="col-lg-3 merchant-id">
      <p>Merchant ID</p>
      <select
        ngDefaultControl
        [ngModelOptions]="{ standalone: true }"
        class="browser-default custom-select d-block input-id"
        mdbTooltip="How many times in a 24hr period"
        placement="top"
      >
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="6">6</option>
      </select>
    </div>

    <!-- filter -->
    <div class="col-lg-9">
      <div class="row">
        <div class="merchant-number col-lg-3">
          <p>Contact</p>
          <input
            class="form-control my-0 py-0 phone-number"
            [ngModelOptions]="{ standalone: true }"
            ngDefaultControl
            type="text"
            placeholder=""
          />
        </div>
        <div class="merchant-name col-lg-3">
          <p>Merchant Name</p>
          <input
            class="form-control my-0 py-0 input-name"
            [ngModelOptions]="{ standalone: true }"
            ngDefaultControl
            type="text"
            placeholder=""
          />
        </div>
        <div class="merchant-status col-lg-3">
          <p>Status</p>
          <input
            class="form-control my-0 py-0 input-status"
            [ngModelOptions]="{ standalone: true }"
            ngDefaultControl
            type="text"
            placeholder=""
          />
        </div>
        <button class="btn btn-sm btn-filter">Filter</button>
      </div>
    </div>
  </div>
</div>
<br />

<!-- flexicon  -->
<table class="flexicon">
  <tr class="flex-cont row">
    <td class="icons" (click)="getMerchant(viewModal, false)">
      <img
        class="flexicon-image img-responsive"
        src="../../../assets/img/web.svg"
      /><a>View</a>
    </td>
    <td class="icons" (click)="addModal.show()">
      <img
        class="flexicon-image img-responsive"
        src="../../../assets/img/ui.svg"
      /><a>Add</a>
    </td>
    <td class="icons" (click)="getMerchant(addModal, true)">
      <img
        class="flexicon-image img-responsive"
        src="../../../assets/img/archive.svg"
      /><a>Edit</a>
    </td>
    <td class="icons" (click)="deleteMerchant()">
      <img
        class="flexicon-image img-responsive"
        src="../../../assets/img/rubbish-can.svg"
      /><a>Delete</a>
    </td>

    <td class="icons">
      <img class="flexicon-image" src="../../../assets/img/arrows.svg" /><a
        >Import</a
      >
    </td>
    <td class="icons">
      <img class="flexicon-image" src="../../../assets/img/arrows (1).svg" /><a
        >Export</a
      >
    </td>
  </tr>
</table>
<br />
<!-- table -->
<div class="table-responsive">
  <table class="table table-striped table-hover mb-0">
    <!--Table head-->
    <thead>
      <tr style="text-align: center">
        <th>
          <div class="custom-control custom-checkbox">
            <input
              type="checkbox"
              class="checkbox-style"
              id="tableDefaultCheck2"
              (change)="checkAll()"
              [(ngModel)]="masterSelected"
            />
          </div>
        </th>
        <th class="th-md">S/N</th>

        <th class="th-md">
          <a (click)="sortBy('Merchant_id')"
            >Merchant ID
            <i class="fa fa-sort ml-1"></i>
          </a>
        </th>

        <th class="th-md">
          <a (click)="sortBy('merchant_id')"
            >Merchant name
            <i class="fa fa-sort ml-1"></i>
          </a>
        </th>

        <th class="th-md">
          <a (click)="sortBy('printer_status')"
            >Contact
            <i class="fa fa-sort ml-1"></i>
          </a>
        </th>
        <th class="th-md">
          <a (click)="sortBy('printer_status')"
            >Status
            <i class="fa fa-sort ml-1"></i>
          </a>
        </th>
      </tr>
    </thead>

    <!--Table body-->
    <tbody>
      <tr
        *ngFor="let row of merchants; let i = index"
        style="text-align: center"
      >
        <td>
          <div class="custom-control custom-checkbox">
            <input
              type="checkbox"
              class="checkbox-style"
              [(ngModel)]="row.isSelected"
              (change)="getUnassigned(row.isSelected, row.id)"
            />
            <!-- <label class="custom-control-label" for="tableDefaultCheck2">Check 2</label> -->
          </div>
          <!-- <input type="checkbox" [(ngModel)]="row.isSelected" (change)="getUnassigned(row.isSelected, row.serialNumber)">  -->
        </td>

        <td>{{ serial + i }}</td>
        <td>{{ row.merchantID }}</td>
        <td>{{ row.merchantName }}</td>
        <td>{{ row.contacts[0].phone }}</td>
        <td>{{ row.status }}</td>
      </tr>
    </tbody>

    <!--Table body-->
    <tbody *ngIf="isData == false; else gettingData">
      <tr>
        <td colspan="15" style="text-align: center; padding: 5% 20%">
          <strong>No Data Available</strong>
        </td>
      </tr>
    </tbody>
    <ng-template #gettingData>
      <tbody *ngIf="isData == undefined">
        <tr>
          <td colspan="15" style="text-align: center; padding: 5% 20%">
            <mdb-spinner spinnerColor="blue"></mdb-spinner>
          </td>
        </tr>
      </tbody>
    </ng-template>
  </table>
</div>

<!-- view Merchant modal -->
<div
  mdbModal
  #viewModal="mdbModal"
  class="modal fade"
  style="overflow: auto"
  tabindex="-1"
  role="dialog"
  aria-labelledby="myBasicModalLabel"
  aria-hidden="true"
  [config]="{ backdrop: true, ignoreBackdropClick: false }"
>
  <div
    class="modal-dialog modal-dialog-scrollable wider modal-fluid"
    role="document"
    *ngIf="merchant"
  >
    <div class="modal-content" *ngIf="merchant">
      <div class="modal-header">
        <div class="header">
          <p>View Merchant</p>
        </div>
        <div>
          <button
            type="button"
            class="btn btn-uc btn-sm waves-light"
            aria-label="Close"
            data-dismiss="modal"
            style="
              color: red !important;
              background-color: white !important;

              font-size: 13px;
              font-weight: bold;
              display: flex;
              text-align: center;
              border: 1px solid !important;
            "
            (click)="viewModal.hide()"
            mdbWavesEffect
          >
            <i
              class="fas fa-times"
              style="text-align: center; align-self: center"
            ></i>
          </button>
        </div>
      </div>

      <!-- modal head -->

      <br />
      <!-- modal body -->
      <div class="modal-body">
        <div class="table-responsive">
          <div class="row">
            <!--first column-->
            <div class="col-lg-6">
              <div class="py-1">
                <div class="row input-style">
                  <p class="col-lg-6 no-change m-0 title col-4">Merchant ID</p>
                  <p class="col-lg-6 no-change m-0 subtitle col-8">
                    {{ merchant[0].merchantId }}
                  </p>
                </div>
              </div>
              <br />
              <div class="py-1">
                <div class="row input-style">
                  <p class="col-lg-6 no-change m-0 title col-4">Contact Name</p>
                  <p class="col-lg-6 no-change m-0 subtitle col-8">
                    {{ merchant[0].contactName }}
                  </p>
                </div>
              </div>
              <br />
              <div class="py-1">
                <div class="row input-style">
                  <p class="col-lg-6 no-change m-0 title col-4">Email</p>
                  <p class="col-lg-6 no-change m-0 subtitle col-8">
                    {{ merchant[0].email }}
                  </p>
                </div>
              </div>
              <br />
              <div class="py-1">
                <div class="row input-style">
                  <p class="col-lg-6 no-change m-0 title col-4">Fax</p>
                  <p class="col-lg-6 no-change m-0 subtitle col-8">
                    {{ merchant[0].fax }}
                  </p>
                </div>
              </div>
              <br />
              <div class="py-1">
                <div class="row input-style">
                  <p class="col-lg-6 no-change m-0 title col-4">Description</p>
                  <p class="col-lg-6 no-change m-0 subtitle col-8">
                    {{ merchant[0].description }}
                  </p>
                </div>
              </div>
              <br />
              <div class="py-1">
                <div class="row input-style">
                  <p class="col-lg-6 no-change m-0 title col-4">Created At</p>
                  <p class="col-lg-6 no-change m-0 subtitle col-8">
                    {{ merchant[0].createdAt }}
                  </p>
                </div>
              </div>
              <br />
              <div class="py-1">
                <div class="row input-style">
                  <p class="col-lg-6 no-change m-0 title col-4">Phone Number</p>
                  <p class="col-lg-6 no-change m-0 subtitle col-8">
                    {{ merchant[0].phone }}
                  </p>
                </div>
              </div>
              <br />

              <br />
            </div>
          </div>
        </div>
      </div>
      <hr />
      <!-- modal footer -->
      <div class="modal-footer">
        <div class="buttons">
          <button type="button" class="btn done-btn" (click)="viewModal.hide()">
            Done
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- add & edit Merchant modal -->
<div
  mdbModal
  #addModal="mdbModal"
  class="modal fade"
  style="overflow: auto"
  tabindex="-1"
  role="dialog"
  aria-labelledby="myBasicModalLabel"
  aria-hidden="true"
  [config]="{ backdrop: true, ignoreBackdropClick: false }"
>
  <div class="modal-dialog modal-dialog-scrollable modal-fluid" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <div class="header">
          <p *ngIf="!edit">Add Merchant</p>
          <p *ngIf="edit">Edit Merchant</p>
        </div>
        <div>
          <button
            type="button"
            class="btn btn-uc btn-sm waves-light"
            aria-label="Close"
            data-dismiss="modal"
            style="
              color: red !important;
              background-color: white !important;

              font-size: 13px;
              font-weight: bold;
              display: flex;
              text-align: center;
              border: 1px solid !important;
            "
            (click)="addModal.hide()"
            mdbWavesEffect
          >
            <i
              class="fas fa-times"
              style="text-align: center; align-self: center"
            ></i>
          </button>
        </div>
      </div>
      <!-- modal body -->
      <div class="modal-body">
        <div class="table-responsive">
          <div class="row">
            <div class="col-lg-6">
              <br />
              <div class="py-1">
                <div class="row input-style">
                  <p class="col-lg-6 no-change m-0 title col-4 p-input-style">
                    Merchant ID
                  </p>
                  <input
                    class="col-lg-8 form-control my-0 py-0"
                    [ngModelOptions]="{ standalone: true }"
                    ngDefaultControl
                    [(ngModel)]="merchantId"
                    name="merchantId"
                    type="text"
                  />
                </div>
              </div>
              <br />
              <div class="py-1">
                <div class="row input-style">
                  <p class="col-lg-6 no-change m-0 title col-4 p-input-style">
                    Contact Name
                  </p>
                  <input
                    class="col-lg-8 form-control my-0 py-0"
                    [ngModelOptions]="{ standalone: true }"
                    ngDefaultControl
                    [(ngModel)]="contactName"
                    name="contactName"
                    type="text"
                  />
                </div>
              </div>
              <br />
              <div class="py-1">
                <div class="row input-style">
                  <p class="col-lg-6 no-change m-0 title col-4 p-input-style">
                    Email
                  </p>
                  <input
                    class="col-lg-8 form-control my-0 py-0"
                    [ngModelOptions]="{ standalone: true }"
                    ngDefaultControl
                    [(ngModel)]="email"
                    name="email"
                    type="text"
                  />
                </div>
              </div>
              <br />
              <div class="py-1">
                <div class="row input-style">
                  <p class="col-lg-6 no-change m-0 title col-4 p-input-style">
                    Phone Number
                  </p>
                  <input
                    class="col-lg-8 form-control my-0 py-0"
                    [ngModelOptions]="{ standalone: true }"
                    ngDefaultControl
                    [(ngModel)]="phone"
                    name="phone"
                    value="phone"
                    type="text"
                  />
                </div>
              </div>
              <br />
              <div class="py-1">
                <div class="row input-style">
                  <p class="col-lg-6 no-change m-0 title col-4 p-input-style">
                    Description
                  </p>
                  <input
                    class="col-lg-8 form-control my-0 py-0"
                    [ngModelOptions]="{ standalone: true }"
                    ngDefaultControl
                    [(ngModel)]="description"
                    name="description"
                    type="text"
                  />
                </div>
              </div>
              <br />
            </div>
            <div class="col-lg-6">
              <br />
              <div class="py-1">
                <div class="row input-style">
                  <p class="col-lg-6 no-change m-0 title col-4 p-input-style">
                    Organisation
                  </p>
                  <input
                    class="col-lg-8 form-control my-0 py-0"
                    [ngModelOptions]="{ standalone: true }"
                    ngDefaultControl
                    [(ngModel)]="organisation"
                    name="organisation"
                    type="text"
                  />
                </div>
              </div>
              <br />
              <div class="py-1">
                <div class="row input-style">
                  <p class="col-lg-6 no-change m-0 title col-4 p-input-style">
                    Fax
                  </p>
                  <input
                    class="col-lg-8 form-control my-0 py-0"
                    [ngModelOptions]="{ standalone: true }"
                    ngDefaultControl
                    [(ngModel)]="fax"
                    name="fax"
                    type="text"
                  />
                </div>
              </div>
              <br />
              <div class="py-1">
                <div class="row input-style">
                  <p class="col-lg-6 no-change m-0 title col-4 p-input-style">
                    Created At
                  </p>
                  <input
                    class="col-lg-8 form-control my-0 py-0"
                    [ngModelOptions]="{ standalone: true }"
                    ngDefaultControl
                    [(ngModel)]="createdAt"
                    name="createdAt"
                    type="date"
                  />
                </div>
              </div>
              <br />
              <div class="py-1">
                <div class="row input-style">
                  <p class="col-lg-6 no-change m-0 title col-4 p-input-style">
                    Updated At
                  </p>
                  <input
                    class="col-lg-8 form-control my-0 py-0"
                    [ngModelOptions]="{ standalone: true }"
                    ngDefaultControl
                    [(ngModel)]="updatedAt"
                    name="updatedAt"
                    value="updatedAt"
                    type="date"
                  />
                </div>
              </div>
              <br />
            </div>
          </div>
        </div>
        <hr />
        <!-- modal footer -->
        <div class="buttons">
          <button type="button" class="btn back-btn" (click)="addModal.hide()">
            Close
          </button>
          <button
            type="button"
            class="btn done-btn"
            (click)="addMerchant()"
            *ngIf="!edit"
          >
            Proceed
          </button>
          <button
            type="button"
            class="btn done-btn"
            (click)="editMerchant()"
            *ngIf="edit"
          >
            Edit
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
